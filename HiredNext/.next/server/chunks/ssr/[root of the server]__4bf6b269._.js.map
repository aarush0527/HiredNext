{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///Users/aarush/Downloads/hirednext-mock_interviewing_platform/firebase/admin.ts"],"sourcesContent":["import { cert, getApps, initializeApp } from 'firebase-admin/app';\r\nimport { getAuth } from 'firebase-admin/auth';\r\nimport { getFirestore } from 'firebase-admin/firestore';\r\n\r\nconst initFirebaseAdmin = () => {\r\n    const apps = getApps();\r\n\r\n    if (!apps.length) {\r\n        initializeApp({\r\n            credential: cert({\r\n                projectId: process.env.FIREBASE_PROJECT_ID,\r\n                clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\r\n                privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n'),\r\n            })\r\n        })\r\n    }\r\n\r\n    return {\r\n        auth: getAuth(),\r\n        db: getFirestore(),\r\n    }\r\n}\r\n\r\nexport const { auth, db } = initFirebaseAdmin();"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;;AAEA,MAAM,oBAAoB;IACtB,MAAM,OAAO,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD;IAEnB,IAAI,CAAC,KAAK,MAAM,EAAE;QACd,CAAA,GAAA,gJAAA,CAAA,gBAAa,AAAD,EAAE;YACV,YAAY,CAAA,GAAA,gJAAA,CAAA,OAAI,AAAD,EAAE;gBACb,WAAW,QAAQ,GAAG,CAAC,mBAAmB;gBAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;gBAC9C,YAAY,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YAClE;QACJ;IACJ;IAEA,OAAO;QACH,MAAM,CAAA,GAAA,kJAAA,CAAA,UAAO,AAAD;QACZ,IAAI,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD;IACnB;AACJ;AAEO,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG","debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///Users/aarush/Downloads/hirednext-mock_interviewing_platform/src/lib/actions/auth.action.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { cookies } from \"next/headers\";\r\nimport { auth, db } from \"../../../firebase/admin\";\r\n\r\nexport async function signUp(params: SignUpParams) {\r\n  const { uid, name, email } = params;\r\n\r\n  try {\r\n    const userRocord = await db.collection(\"users\").doc(uid).get();\r\n\r\n    if (userRocord.exists) {\r\n      return {\r\n        success: false,\r\n        message: \"User already exists. Please login.\",\r\n      };\r\n    }\r\n\r\n    await db.collection(\"users\").doc(uid).set({\r\n      name,\r\n      email,\r\n    });\r\n\r\n    return {\r\n      success: true,\r\n      message: \"User created successfully\",\r\n    };\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  } catch (error: any) {\r\n    console.error(\"Error signing up:\", error);\r\n    if (error.code === \"auth/email-already-exists\") {\r\n      return {\r\n        success: false,\r\n        message: \"Email already exists\",\r\n      };\r\n    }\r\n\r\n    return {\r\n      success: false,\r\n      message: \"Error signing up\",\r\n    };\r\n  }\r\n}\r\n\r\nexport async function signIn(params: SignInParams) {\r\n  const { email, idToken } = params;\r\n\r\n  try {\r\n    const userRocord = await auth.getUserByEmail(email);\r\n\r\n    if (!userRocord) {\r\n      return {\r\n        success: false,\r\n        message: \"User not found. Please sign up.\",\r\n      };\r\n    }\r\n\r\n    await setSessionCookie(idToken);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  } catch (error: any) {\r\n    console.error(\"Error signing up:\", error);\r\n    return {\r\n      success: false,\r\n      message: \"Error signing in\",\r\n    };\r\n  }\r\n}\r\n\r\nexport async function setSessionCookie(idToken: string) {\r\n  const cookieStore = await cookies();\r\n\r\n  const sessionCookie = await auth.createSessionCookie(idToken, {\r\n    expiresIn: 60 * 60 * 24 * 5 * 1000, // 5 days\r\n  });\r\n\r\n  cookieStore.set(\"session\", sessionCookie, {\r\n    maxAge: 60 * 60 * 24 * 5, // 5 days\r\n    httpOnly: true,\r\n    secure: process.env.NODE_ENV === \"production\",\r\n    path: \"/\",\r\n    sameSite: \"lax\",\r\n  });\r\n}\r\n\r\nexport async function getCurrentUser(): Promise<null | User> {\r\n  const cookieStore = await cookies();\r\n  const sessionCookie = cookieStore.get(\"session\")?.value;\r\n\r\n  if (!sessionCookie) {\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    const decodedClaims = await auth.verifySessionCookie(sessionCookie, true);\r\n\r\n    const user = await db.collection(\"users\").doc(decodedClaims.uid).get();\r\n\r\n    if (!user.exists) {\r\n      return null;\r\n    }\r\n    return {\r\n      ...user.data(),\r\n      id: user.id,\r\n    } as User;\r\n  } catch (error) {\r\n    console.error(\"Error verifying session cookie:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function isAuthenticated() {\r\n  const user = await getCurrentUser();\r\n  return !!user;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;;;;;;;;;;AAEO,eAAe,uCAAI,GAAJ,OAAO,MAAoB;IAC/C,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG;IAE7B,IAAI;QACF,MAAM,aAAa,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG;QAE5D,IAAI,WAAW,MAAM,EAAE;YACrB,OAAO;gBACL,SAAS;gBACT,SAAS;YACX;QACF;QAEA,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG,CAAC;YACxC;YACA;QACF;QAEA,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACA,8DAA8D;IAChE,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,qBAAqB;QACnC,IAAI,MAAM,IAAI,KAAK,6BAA6B;YAC9C,OAAO;gBACL,SAAS;gBACT,SAAS;YACX;QACF;QAEA,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF;AACF;AAEO,eAAe,uCAAI,GAAJ,OAAO,MAAoB;IAC/C,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IAE3B,IAAI;QACF,MAAM,aAAa,MAAM,iHAAA,CAAA,OAAI,CAAC,cAAc,CAAC;QAE7C,IAAI,CAAC,YAAY;YACf,OAAO;gBACL,SAAS;gBACT,SAAS;YACX;QACF;QAEA,MAAM,iBAAiB;IACvB,8DAA8D;IAChE,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF;AACF;AAEO,eAAe,uCAAc,GAAd,iBAAiB,OAAe;IACpD,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAEhC,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,SAAS;QAC5D,WAAW,KAAK,KAAK,KAAK,IAAI;IAChC;IAEA,YAAY,GAAG,CAAC,WAAW,eAAe;QACxC,QAAQ,KAAK,KAAK,KAAK;QACvB,UAAU;QACV,QAAQ,oDAAyB;QACjC,MAAM;QACN,UAAU;IACZ;AACF;AAEO,eAAe,uCAAY,GAAZ;IACpB,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,gBAAgB,YAAY,GAAG,CAAC,YAAY;IAElD,IAAI,CAAC,eAAe;QAClB,OAAO;IACT;IAEA,IAAI;QACF,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,eAAe;QAEpE,MAAM,OAAO,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,cAAc,GAAG,EAAE,GAAG;QAEpE,IAAI,CAAC,KAAK,MAAM,EAAE;YAChB,OAAO;QACT;QACA,OAAO;YACL,GAAG,KAAK,IAAI,EAAE;YACd,IAAI,KAAK,EAAE;QACb;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO;IACT;AACF;AAEO,eAAe,uCAAa,GAAb;IACpB,MAAM,OAAO,MAAM;IACnB,OAAO,CAAC,CAAC;AACX;;;IA5GsB;IAuCA;IAwBA;IAgBA;IA0BA;;AAzGA,+OAAA;AAuCA,+OAAA;AAwBA,+OAAA;AAgBA,+OAAA;AA0BA,+OAAA","debugId":null}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///Users/aarush/Downloads/hirednext-mock_interviewing_platform/src/app/%28root%29/layout.tsx"],"sourcesContent":["import { isAuthenticated } from \"@/lib/actions/auth.action\";\r\nimport { redirect } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport React from \"react\";\r\n\r\nconst RootLayout = async ({ children }: { children: React.ReactNode }) => {\r\n  const isUserAuthenticated = await isAuthenticated();\r\n\r\n  if (!isUserAuthenticated) redirect(\"/sign-in\");\r\n\r\n  return (\r\n    <div className=\"root-layout\">\r\n      <nav>\r\n        <Link href=\"/\" className=\"flex items-center gap-2\">\r\n          <Image src=\"/logo.png\" alt=\"Logo\" width={150} height={150} />\r\n        </Link>\r\n      </nav>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RootLayout;\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;;;;;AAGA,MAAM,aAAa,OAAO,EAAE,QAAQ,EAAiC;IACnE,MAAM,sBAAsB,MAAM,CAAA,GAAA,uIAAA,CAAA,kBAAe,AAAD;IAEhD,IAAI,CAAC,qBAAqB,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;0BACC,cAAA,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;oBAAI,WAAU;8BACvB,cAAA,8OAAC,6HAAA,CAAA,UAAK;wBAAC,KAAI;wBAAY,KAAI;wBAAO,OAAO;wBAAK,QAAQ;;;;;;;;;;;;;;;;YAGzD;;;;;;;AAGP;uCAEe","debugId":null}}]
}